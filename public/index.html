<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" type="text/css" href="stylesheet.css"><link rel="icon" type="image/png" href="favicon.png"><link rel="shortcut icon" href="favicon.ico"><title>Notes on Foundations of JavaScript</title></head><body><a id="topOfPage"></a><div class="wrapper" data-ng-app="webapp"><header class="header"><h3>Notes on Foundations of JavaScript</h3></header><aside class="aside aside-1"><section><h3>Pages</h3><ul id="pageList"><li><a target="_self" href="#article">Home</a></li><li><a target="_self" href="#aside-2">Links</a></li><li><a target="_self" href="ie8/">IE8</a></li></ul></section><section><div><img id="icon" class="js wudata"></div><div><a id="tempf" target="_blank" class="js wudata" href="https://coldenoughtostorebeeroutside.herokuapp.com/" title="Is it cold enough to store my beer outside?"></a></div><div id="precip" class="js wudata"></div><div id="wind" class="js wudata"></div></section></aside><article class="main"><a id="article"></a><section><h3 id="jsweekly" class="pinned"><a href="http://javascriptweekly.com/" target="_blank">JavaScript Weekly</a></h3><ul id="jsweekly-links"><li></li></ul><div id="jsweekly-latest-content"></div></section><section><h3>Innovations around single page web applications</h3><ul><li>jQuery</li><li>Backbone.js, Grunt, Require.js and Handlebars</li><li>Angular 1.x, Gulp and Browserify</li><li>React, Flux and Browserify</li><li>Angular 2.0 (with Web Components and ECMAScript 6)</li></ul><ul><li>Imperative model to declarative model</li><li>Solution to cascading imperative state changes</li><li>Legacy browsers to modern browsers</li></ul></section><section><h3>Empty object is truthy</h3><p>JSON object is in the request body. It has an <span class="code">id</span> property. Process the request by the ID. When there is no request body, return status code 500.</p><p><textarea class="code" readonly="true" cols="41" rows="10">
  var handler = function(req, res) {
    if (req.body) {
      process(req.body.id);
    }
    else {
      res.status(500);
    }
    res.json({});
  };</textarea></p><p>The error handling above works when <span class="code">null === req.body</span>. When the body is empty (has an empty JSON object <span class="code">{}</span> which is truthy), this code passes <span class="code">undefined</span> as <span class="code">req.body.id</span> into the <span class="code">process()</span> function.</p></section><section><h3>Coding Interviews in JavaScript</h3><p>Using JavaScript, it is relatively easier to code for moderate to hard coding interview questions which you may not get asked too often when using C++ for example because the answer is unlikely to fit in the required time of an interview. A couple of examples:</p><ul><li>Hash table like data structure is available natively as built-in <span class="code">Object</span></li><li>Elegant way of declaring a cache in Closure for Dynamic Programming</li></ul></section><section><h3>Differences in parseInt(string) and Number(string)</h3><table><tr><td class="head code">str</td><td class="head code">parseInt(str)</td><td class="head code">Number(str)</td></tr><tr><td class="data code">'.1'</td><td class="data code">NaN</td><td class="data code">0.1</td></tr><tr><td class="data code">'0.5'</td><td class="data code">0</td><td class="data code">0.5</td></tr><tr><td class="data code">'1e1'</td><td class="data code">1</td><td class="data code">10</td></tr><tr><td class="data code">'20%'</td><td class="data code">20</td><td class="data code">NaN</td></tr><tr><td class="data code">'48pt'</td><td class="data code">48</td><td class="data code">NaN</td></tr></table></section><section><h3>Localhost server using <a href="http://nodejs.org/" target="_blank">Node.js</a> and <a href="http://expressjs.com/" target="_blank">Express</a></h3><p>A few lines of code runs a localhost server (<span class="code">open http://localhost:8000 &amp;&amp; <a href="http://nodemon.io/" target="_blank"><span class="code">nodemon</span></a> server.js</span>), foundation of <a href="http://expressjs.com/" target="_blank">Express</a> <a href="http://nodejs.org/" target="_blank">Node.js</a> web applications and server side JavaScript.</p><p><textarea class="code" readonly="true" cols="41" rows="8">
  var express = require('express');
  var app = express();

  app.use(express.static(
    __dirname + '/public'));

  app.listen(process.env.PORT || 8000);</textarea></p></section><section><h3>Alias for starting localhost server</h3><ol><li>Add <span class="code">alias server='open http://localhost:8000 &amp;&amp; python -m SimpleHTTPServer'</span> to <span class="code">.bash_profile</span></li><li>Open a new Terminal window</li><li><span class="code">cd</span> to a project folder with <span class="code">index.html</span>, scripts and all other files</li><li><span class="code">server</span></li></ol></section><section><h3>Getting cross-domain XML response</h3><p>Requesting XML from a cross-domain source is not allowed because of the same-origin policy. The RSS feed from <a href="http://javascriptweekly.com/" target="_blank">JavaScript Weekly site</a> is downloaded as a JSONP response using <a href="https://developers.google.com/feed/v1/jsondevguide#using_json" target="_blank">Google Ajax Load Feed API</a>.</p></section><section><h3>jQuery Ajax, JSONP and Handlebars</h3><p>Title of a movie to search for: <input id="movie-title" maxlength="140" type="text" disabled="disabled"></p><ul id="movies"><script id="movies-template" type="text/x-handlebars-template">{{#each Search}}
              <li>{{Title}} ({{Year}})</li>
              {{/each}}</script></ul></section><section><h3>Touch feedback and action</h3><p>Elements with a click event listener added will display some default feedback on a finger tap on mobile devices. Single tap on these devices could also mean to initiate a text selection. The following CSS can be used to disable the default behaviors.</p><p><textarea class="code" readonly="true" cols="41" rows="15">
/* Disable touch feedback */
  -webkit-tap-highlight-color:
    rgba(0, 0, 0, 0);
  -webkit-tap-highlight-color:
    transparent;
  -ms-touch-action: none;

/* Disable text selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;</textarea></p></section><section><h3>Window height and document height</h3><p><span class="code">$(window).height()</span> returns the height of the browser window viewport. <span class="code">$(document).height()</span> returns the height of the document including contents not visible outside of the window viewport.</p><div id="floor" class="js notouch"><div id="mouse" class="notouch"></div></div><div id="play" class="button">Play</div><span id="mouse-preload"></span></section><section><h3>Hit testing</h3><p>Hit testing in document coordinates works better than in element <span class="js">(the wood floor in this case)</span>coordinates. Click events <span class="js">on the floor above</span>are handled using <span class="code">event.pageX</span> | <span class="code">pageY</span>, hit tested against <span class="js">the mouse</span>element location <span class="code">$(element).offset().left</span> | <span class="code">top</span> or <span class="code">element.offsetLeft</span> | <span class="code">offsetTop</span>. Event offsets <span class="code">event.offsetX</span> | <span class="code">offsetY</span> returned undefined in Firefox 33.</p></section><section><h3>Browser developer tools</h3><p>⌥⌘I (as in <u>I</u>nspect Element?) is a useful keyboard shortcut to remember. It is option + command + I (or Ctrl + Shift + I on Windows).</p><table><tr><td></td><td class="default">Open Console</td><td class="data">Toggle Tools</td></tr><tr><td class="head">Chrome</td><td class="default">⌥⌘J</td><td class="data">⌥⌘I</td></tr><tr><td class="head">Firefox</td><td class="default">⌥⌘K</td><td class="data">⌥⌘I</td></tr><tr><td class="head">Safari&nbsp;<sup>(*1)</sup></td><td class="default">⌥⌘C</td><td class="data">⌥⌘I</td></tr><tr><td class="head">IE</td><td class="default">F12</td><td class="data">F12</td></tr></table><p>(*1) Safari > Preferences… > Advanced > Show Develop menu in menu bar, to enable.</p></section><section><h3>$variables</h3><p>Convention to prepend variables that hold jQuery objects with a <span class="code">$</span>.</p><p><span class="code">$lis = $('li');</span></p><h3>DOM element in jQuery object</h3><p><span class="code">$('#id')[0]</span> returns a reference to the actual DOM element.</p><p><textarea id="domElem" class="code" readonly="true" cols="41" rows="5">
  var $obj = $('#jsLinks li').first();

> console.log($obj[0].textContent);</textarea></p></section><section><h3>Differences between remove and detach jQuery methods</h3><p><span class="code">$(element).remove()</span> removes the matched elements from the DOM completely including events associated with the matched elements.</p><p><span class="code">$(element).detach()</span> is like <span class="code">remove()</span>, but keeps the stored data and events associated with the matched elements.</p><p><span class="code">$(element).hide()</span> sets the matched elements' CSS <span class="code">display</span> property to <span class="code">'none'</span>.</p></section><section><h3>Computed style</h3><p>To read the actual property after CSS and styles are applied, the DOM level 2 standard describes <span class="code">window.getComputedStyle()</span> method. All browsers except <a href="#ie8">IE8</a> and older support this method.</p><p><textarea id="marginLeft" class="code" readonly="true" cols="41" rows="6">
  var cs = getComputedStyle(
    document.body, null);

> console.log(cs.marginLeft);</textarea></p></section><section><h3>Memoization in Closure</h3><p>Fibonacci( <input id="fibn" type="text" size="5" maxlength="4" disabled="disabled"> ) = <span id="fibans">?</span></p><p><textarea class="code" readonly="true" cols="41" rows="19">
  var fibonacci = function() {
    var cache = [0, 1];

    return function fib(n) {
      var r;

      if (n >= 0) {
        r = cache[n];

        if (typeof r !== 'number') {
          r = fib(n - 1) + fib(n - 2);
          cache[n] = r;
        }
      }

      return r;
    };
  }();</textarea></p></section><section><h3>Cascade (Chaining)</h3><p><em>Cascading</em> (or <em>chaining</em>) enables calling many methods on the same object in sequence in a single statement.</p><p><textarea class="code" readonly="true" cols="41" rows="6">
  listener($('#mouseover1'))
  .jQueryEvent('mouseover', '#howTo')
  .callback = function(event) {
    showId(this.getElement(), event);
  };</textarea></p></section><section><h3>How to check if a class exists</h3><p><span class="code">if (Class) {}</span> is a reference error. jQuery has an API for this. It's <span class="code">$.isFunction(Class)</span>.</p><p><textarea class="code" readonly="true" cols="41" rows="12">
  if (typeof Class === 'function') {
    var obj = new Class();

    if (obj.hasOwnProperty('property')) {
      var p = obj.property;
    }

    if (obj.method) {
      obj.method();
    }
  }</textarea></p></section><section><h3>Event listeners and handlers</h3><p>Traditional DOM event handler <span class="code">attachEvent()</span> method only works in <a href="#ie8">Internet Explorer</a> and Opera. DOM level 2 event listener <span class="code">addEventListener()</span> method works in Firefox, Google Chrome and Safari (and Opera and <a href="#ie8">Internet Explorer</a> from version 9).</p><div id="click1" class="listener clickable">click<br>(jQuery)</div><div id="click2" class="listener clickable">click<br>(DOM Listener)</div><div id="click3" class="listener clickable">onclick<br>(DOM Handler)</div></section><section><h3>Mutation Observers</h3><p><em>Mutation observers</em> are designed to wait until a script has finished its task before reacting, then report the changes as a batch.</p><p><textarea class="code" readonly="true" cols="41" rows="17">
  var observer = new MutationObserver(
    function(mutations) {
      mutations.forEach(function(m) {
        for (var i = 0;
          i &lt; m.addedNodes.length;
          i++)
        {
          console.log(m.addedNodes[i]);
        }
      });
    }
  );

  observer.observe(element, {
    childList: true
  });</textarea></p><div id="catObserver" class="listener">Cat<br>observer</div><div id="ua"></div></section><section><h3>Closure and Module</h3><p>The function has access to the context in which it was created. This is called <em>closure</em>.</p><p>Functions and closure can make modules. A <em>module</em> is a function or object that presents an interface but that hides its state and implementation.</p><div id="start" class="button">Count</div><div id="counter" class="button"></div><div id="cats"></div></section><section><h3>Public and private members</h3><p><textarea class="code" readonly="true" cols="41" rows="22">
  var counter = function($element) {
    function Counter() {
      this.unit = '';
    }

    Counter.prototype.increment =
      function() {
        ++count;
        update();
      };

    var instance = new Counter();
    var count = 0;

    var update = function() {
      $element.text(
        count + ' ' + instance.unit);
    };

    return instance;
  };</textarea></p><p><span class="code">unit</span> and <span class="code">increment()</span> are public property and method.</p><p><span class="code">count</span>, <span class="code">$element</span> and <span class="code">update()</span> are private properties and method.</p><p><span class="code">'counter'</span> starts with a lower case letter, which indicates that an instance of this object is created without using the new operator.</p><div id="catButton" class="button">Cat counter</div><div id="dogButton" class="button">Dog counter</div></section><section><h3>Objects by reference</h3><p>Arguments in primitive data types are passed to a function <em>by value</em>. Objects are passed <em>by reference</em>. This is one possible cause of <a href="http://en.wikipedia.org/wiki/Side_effect_(computer_science)" target="_blank">side effects</a>.</p><p><textarea id="bob" class="code" readonly="true" cols="41" rows="14">
  var isBobSmiling = false;

  var bob = {
    smiling: false
  };

  (function smile(smiling, person) {
    smiling = true;
    person.smiling = true;
  }(isBobSmiling, bob));

> console.log(isBobSmiling, bob);</textarea></p></section><section><a id="ie8"></a><h3><a href="ie8/">Internet Explorer 8</a></h3><p>Most browsers except IE8 treat whitespace between elements (such as spaces or carriage returns) as a text node.</p><p>IE8 had a different event model and did not support <span class="code">addEventListener()</span>. Instead, it used a method called <span class="code">attachEvent()</span>.</p><p><textarea class="code" readonly="true" cols="41" rows="12">
  if (el.addEventListener) {
    el.addEventListener('blur',
      function() {
        handleThisEvent();
      }, false);
  } else {
    el.attachEvent('onblur',
      function() {
        handleThisEvent();
      });
  }</textarea></p><p>Here is <a href="ie8/">a link to a page</a> which demonstrates some of the differences in IE8 when it is loaded in Internet Explorer.</p></section></article><aside class="aside aside-2"><a id="aside-2"></a><section><h3>JavaScript links</h3><ul id="jsLinks"><li><a target="_blank" href="http://eloquentjavascript.net/">Eloquent JavaScript</a></li><li><a target="_blank" href="https://developer.mozilla.org/en-US/docs/web/javascript">Mozilla Developer Network</a></li><li><a target="_blank" href="https://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml">Google JavaScript Style Guide</a></li><li><a target="_blank" href="http://jsfiddle.net/">JS Fiddle</a></li><li><a target="_blank" href="http://www.javascriptkit.com/">JavaScript Kit</a></li><li><a target="_blank" href="http://www.scripterlative.com/">Scripterlative</a></li><li><a target="_blank" href="http://www.smashingmagazine.com/2009/02/08/50-extremely-useful-javascript-tools/">50 Useful JavaScript Tools</a></li><li><a target="_blank" href="https://www.codefellows.org/blog/a-list-of-foundational-javascript-tools">A List of Foundational JavaScript Tools</a></li><li><a target="_blank" href="http://devchat.tv/js-jabber/109-jsj-dependency-injection-in-javascript-with-vojtda-jina-misko-hevery">JavaScript Jabber</a></li><li><a target="_blank" href="https://leanpub.com/understandinges6/read">Understanding ECMAScript 6</a></li></ul></section><section><h3>Node.js links</h3><ul id="nodeLinks"><li><a target="_blank" href="http://nodejs.org/">Node.js</a></li><li><a target="_blank" href="http://www.nodebeginner.org/">The Node Beginner Book</a></li><li><a target="_blank" href="http://nodeschool.io/">nodeschool.io</a></li><li><a target="_blank" href="https://docs.nodejitsu.com/">docs.nodejitsu.com</a></li><li><a target="_blank" href="http://expressjs.com/">Express</a></li><li><a target="_blank" href="http://nodemon.io/">Nodemon</a></li></ul></section><section><h3>jQuery links</h3><ul id="jQLinks"><li><a target="_blank" href="http://code.jquery.com/">jQuery CDN</a></li><li><a target="_blank" href="https://developers.google.com/speed/libraries/devguide">Google Hosted Libraries</a> (<a target="_blank" href="https://developers.google.com/speed/libraries/devguide#jquery">jQuery</a>)</li><li><a target="_blank" href="http://api.jquery.com/">jQuery API</a></li><li><a target="_blank" href="http://oscarotero.com/jquery/">jQuery Quick API Reference</a></li></ul></section><section><h3>Angular.js links</h3><ul id="angularLinks"><li><a target="_blank" href="https://docs.angularjs.org/guide">Guide to AngularJS Documentation</a></li><li><a target="_blank" href="https://docs.angularjs.org/api">AngularJS API Docs</a></li><li><a target="_blank" href="https://egghead.io/">Egghead.io</a></li><li><a target="_blank" href="http://blog.ivanstorck.com/top-5-resources-for-learning-angularjs/">Top 5 Resources For Learning AngularJS</a></li><li><a target="_blank" href="https://www.youtube.com/watch?v=gNmWybAyBHI">Angular 2.0 Core at ng-europe 2014</a></li><li><a target="_blank" href="https://www.airpair.com/angularjs/posts/preparing-for-the-future-of-angularjs">Preparing for the future of AngularJS</a></li></ul></section><section><h3>Other links</h3><ul id="otherLinks"><li><a target="_blank" href="https://cdnjs.com/">CDN for JavaScript and CSS</a></li><li><a target="_blank" href="http://devdocs.io/">DevDocs</a></li><li><a target="_blank" href="http://caniuse.com/">Can I use __ ?</a></li><li><a target="_blank" href="http://handlebarsjs.com/">Handlebars</a></li><li><a target="_blank" href="http://www.programmableweb.com/category/all/apis?data_format=21173">ProgrammableWeb</a></li><li><a target="_blank" href="https://developers.google.com/feed/v1/jsondevguide#using_json">Google Feed API</a></li><li><a target="_blank" href="http://heroku.com/">Heroku</a></li><li><a target="_blank" href="http://sassmeister.com/">SassMeister</a></li></ul></section></aside><footer class="footer"><p><a href="#topOfPage">↑ Back to top</a></p><p><small>Changes last made on <span id="timestamp"></span></small></p></footer></div><script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.min.js"></script><script async src="script.js"></script></body></html>