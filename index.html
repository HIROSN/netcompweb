<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="listener.js"></script>
    <script src="script.js"></script>
    <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
    <link rel="stylesheet" type="text/css" href="listener.css"/>
    <link rel="shortcut icon" href="favicon.ico" />
    <title>Notes on foundations of JavaScript</title>
  </head>
  <body>

    <h3>Computed style</h3>
    <p>To read the actual property after CSS and styles are applied, the DOM
      level 2 standard describes window.getComputedStyle method. All browsers
      except <a href="#ie8">IE8</a> and older support this method.</p>
    <p>
      <textarea id="marginLeft" class="code" readonly=true cols=41 rows=6>
  var cs = getComputedStyle(
    document.body, null);

> console.log(cs.marginLeft);</textarea>
    </p>

    <h3>Memoization in Closure</h3>
    <p>Fibonacci( <input id="fibn" type="text" size=5 maxlength=4> ) =
      <span id="fibans">?</span></p>
    <p>
      <textarea class="code" readonly=true cols=41 rows=19>
  var fibonacci = function() {
    var cache = [0, 1];

    return function fib(n) {
      var r;

      if (n >= 0) {
        r = cache[n];

        if (typeof r !== 'number') {
          r = fib(n - 1) + fib(n - 2);
          cache[n] = r;
        }
      }

      return r;
    };
  }();</textarea>
    </p>

    <h3>Cascade</h3>
    <p>Cascading enables calling many methods on the same object in sequence
      in a single statement.</p>
    <p>
      <textarea class="code" readonly=true cols=41 rows=6>
  listener($('#mouseover1')).
    jQueryEvent('mouseover', '#howTo').
    callback = function(event) {
      showId(this.getElement(), event);
    };</textarea>
    </p>

    <h3>How to check if a class exists</h3>
    <p>if (Class) {} is a reference error.</p>
    <p>
      <textarea class="code" readonly=true cols=41 rows=12>
  if (typeof Class === 'function') {
    var obj = new Class();

    if (obj.hasOwnProperty('property')) {
      var p = obj.property;
    }

    if (obj.method) {
      obj.method();
    }
  }</textarea>
    </p>

    <h3>Event listeners and handlers</h3>
    <p>Traditional DOM event handler attachEvent method only works in
      <a href="#ie8">Internet Explorer</a> and Opera. DOM level 2 event
      listener addEventListener method works in Firefox, Google Chrome
      and Safari (and Opera and <a href="#ie8">Internet Explorer</a>
      from version 9).</p>
    <div id="click1" class="listener clickable">click<br>(jQuery)</div>
    <div id="click2" class="listener clickable">click<br>(DOM Listener)</div>
    <div id="click3" class="listener clickable">onclick<br>(DOM Handler)</div>

    <h3>Mutation Observers</h3>
    <p>Mutation observers are designed to wait until a script has finished
      its task before reacting, then report the changes as a batch.</p>
    <p>
      <textarea class="code" readonly=true cols=41 rows=17>
  var observer = new MutationObserver(
    function(mutations) {
      mutations.forEach(function(m) {
        for (var i = 0;
          i < m.addedNodes.length;
          i++)
        {
          console.log(m.addedNodes[i]);
        }
      });
    }
  );

  observer.observe(element, {
    childList: true
  });</textarea>
    </p>
    <div id="catObserver" class="listener">Cat<br>observer</div>
    <div id="ua"></div>

    <h3>Closure and Module</h3>
    <p>The function has access to the context in which it was created.
      This is called <em>closure</em>.</p>
    <p>Functions and closure can make modules. A <em>module</em> is a function
      or object that presents an interface but that hides its state and
      implementation.</p>
    <div id="start" class="button">Count</div>
    <div id="counter" class="button"></div>
    <div id="cats"></div>

    <h3>Public and private members</h3>
    <p>
      <textarea class="code" readonly=true cols=41 rows=20>
  var counter = function(element) {
    var instance = {
      unit: '',

      increment: function() {
        ++count;
        update();
      }
    };

    var count = 0;

    var update = function() {
      element.text(
        count + ' ' + instance.unit);
    };

    return instance;
  };</textarea>
    </p>
    <p>unit and increment() are public property and method.</p>
    <p>count, element and update() are private properties and method.</p>
    <p>'counter' starts with a lower case letter, which indicates that an instance of this object is created without using the new operator.</p>
    <div id="catButton" class="button">Cat counter</div>
    <div id="dogButton" class="button">Dog counter</div>

    <h3>Objects by reference</h3>
    <p>Arguments in primitive data types are passed to a function <em>by
      value</em>. Objects are passed <em>by reference</em>. This is one
      possible cause of
      <a href="http://en.wikipedia.org/wiki/Side_effect_(computer_science)"
        target="_blank">side effects</a>.</p>
    <p>
      <textarea id="bob" class="code" readonly=true cols=41 rows=14>
  var isBobSmiling = false;

  var bob = {
    smiling: false
  };

  (function smile(smiling, person) {
    smiling = true;
    person.smiling = true;
  }(isBobSmiling, bob));

> console.log(isBobSmiling, bob);</textarea>
    </p>

    <a id="ie8"></a><h3><a href="ie8/">Internet Explorer 8</a></h3>
    <p>Most browsers except IE8 treat whitespace between elements (such as
      spaces or carriage returns) as a text node.</p>
    <p>IE8 had a different event model and did not support addEventListener().
      Instead, it used a method called attachEvent().</p>
    <p>
      <textarea class="code" readonly=true cols=41 rows=12>
  if (el.addEventListener) {
    el.addEventListener('blur',
      function() {
        handleThisEvent();
      }, false);
  } else {
    el.attachEvent('onblur',
      function() {
        handleThisEvent();
      });
  }</textarea>
    </p>
    <p>Here is a <a href="ie8/">link to a page</a> which demonstrates some of
      the differences in IE8 when it is loaded in Internet Explorer.</p>

    <p>
      <small><i>Changes last made on <span id="timestamp"></span></i></small>
    </p>
  </body>
</html>
